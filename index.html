<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>F1 GP Breakdown</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <h1>F1 GP Breakdown</h1>
    <p>Fast recap, standings, and what’s next.</p>

    <!-- Countdown target lives here, not inside any table or card content -->
    <div id="countdown"
         class="countdown"
         data-event="Belgian GP"
         data-target="2025-08-31T13:00:00Z">
      Countdown loading…
    </div>
    <noscript>Enable JavaScript to see the live countdown.</noscript>
  </header>

  <main class="grid">
    <section class="card recap">
      <h2>Latest race recap</h2>
      <h3>Hungarian Grand Prix — Hungaroring</h3>
      <ul>
        <li><strong>Headline:</strong> Lando Norris holds off Oscar Piastri by 0.698s; George Russell completes the podium.</li>
        <li><strong>Lap 1:</strong> Leclerc keeps P1 into Turn 1; Norris drops to P4.</li>
        <li><strong>Lap 23:</strong> McLaren split strategies — Norris one‑stop, Piastri two‑stop.</li>
        <li><strong>Lap 69:</strong> Late lockup from Piastri seals Norris’s win.</li>
      </ul>
    </section>

    <section class="card standings">
      <h2>Driver standings</h2>
      <table>
        <thead>
          <tr>
            <th>Pos</th>
            <th>Driver</th>
            <th>Team</th>
            <th>Pts</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>Lando Norris</td>
            <td>McLaren</td>
            <td>—</td>
          </tr>
          <!-- More rows -->
        </tbody>
      </table>
    </section>

    <!-- More cards here, but no <script> tags inside any table or card markup -->
  </main>

  <!-- Safe place for all scripts, right before closing body -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const el = document.getElementById('countdown');
      if (!el) return;

      const eventName = el.dataset.event?.trim() || 'Next race';
      const targetStr = el.dataset.target?.trim();
      const target = targetStr ? new Date(targetStr) : null;

      if (!target || isNaN(target.getTime())) {
        el.textContent = 'Countdown TBA';
        return;
      }

      function two(n) { return String(n).padStart(2, '0'); }

      function render() {
        const now = new Date();
        const diff = target.getTime() - now.getTime();

        if (diff <= 0) {
          el.textContent = `${eventName} is underway!`;
          clearInterval(timer);
          return;
        }

        const d = Math.floor(diff / 86_400_000);
        const h = Math.floor((diff % 86_400_000) / 3_600_000);
        const m = Math.floor((diff % 3_600_000) / 60_000);
        const s = Math.floor((diff % 60_000) / 1_000);

        el.textContent = `Countdown to ${eventName}: ${d}d ${two(h)}h ${two(m)}m ${two(s)}s`;
      }

      render();
      const timer = setInterval(render, 1000);
    });
  </script>
  <!-- Right before closing body -->

 function format(diffMs) {
      const d = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      const h = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const m = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));
      const s = Math.floor((diffMs % (1000 * 60)) / 1000);
      return `${d}d ${h}h ${m}m ${s}s`;
    }

    function update() {
      const now = new Date();
      const diff = raceDate - now;
      countdownEl.textContent =
        diff <= 0 ? `${eventName} is underway!` : `Countdown to ${eventName}: ${format(diff)}`;
      if (diff <= 0 && timer) clearInterval(timer);
    }

    update();
    timer = setInterval(update, 1000);
  })();
</script>
</body>

</html>
